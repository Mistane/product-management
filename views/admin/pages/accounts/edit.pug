extends ../.././layouts/default
include ../.././mixins/alertMessage.pug
include ../.././mixins/selectTree.pug

block main
  if(permissions.includes("account_edit"))
    alert-error(5000) 
    
    h1(class="mb-4") Chinh sua tai khoan
    form(
      method="post"
      action=`${prefixAdmin}/accounts/edit/${account.id}?_method=PATCH`
      enctype="multipart/form-data"
    )
      div(class="form-group")
        label(for="fullName") Ho ten *
        input(
          class="form-control"
          id="fullName"
          type="text"
          name="fullName"
          value=account.fullName
        )
      div(class="form-group")
        label(for="email") Email *
        input(
          class="form-control"
          id="email"
          type="text"
          name="email"
          value=account.email
        )
      div(class="form-group")
        label(for="password") Mat khau
        input(
          class="form-control"
          id="password"
          type="password"
          name="password"
        )
      div(class="form-group")
        label(for="phone") So dien thoai
        input(
          class="form-control"
          id="phone"
          type="text"
          name="phone"
          value=account.phone
        )
      div(class="form-group")
        label(for="img") Anh
        input(
          class="form-control"
          id="img"
          type="file"
          name="avatar"
          preview-image-input
        )
        div(class="mt-4")
          img(
            src=account.avatar
            preview-image
            style="width: 200px; height: auto"
          )
      div(class="form-group")
        label() Phan quyen 
        select(class="form-control" name="role_id")
          option(value="" disable) Chon phan quyen
          each role in roles
            option(value=role.id selected=(role.id == account.role_id)) #{role.title}

      div(class="form-group form-check form-check-inline mt-4")
        input(
          type="radio"
          class="form-check-input"
          id="statusActive"
          name="status"
          value="active"
          checked = account.status == "active" ? true : false
        )
        label(for="statusActive" class="form-check-label") Hoat dong
      div(class="form-group form-check form-check-inline")
        input(
          type="radio"
          class="form-check-input"
          id="statusInActive"
          name="status"
          value="inactive"
          checked = account.status == "inactive" ? true : false
        )
        label(for="statusInActive" class="form-check-label") Dung hoat dong
      div(class="form-group")
        button(
          type="submit"
          class="btn btn-success"
        ) Cap nhat
  else
    h1 Ban khong co quyen truy cap
  <script type="application/javascript" src= "/tinymce/tinymce.min.js"></script>
  <script type="application/javascript" src= "/admin/js/my-tinymce-config.js"></script>
